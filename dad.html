<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>爸爸生日快乐</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="container center">
    <h2>🎈 爸爸 46 岁生日快乐 🎈</h2>
    <p>第一张图片是高考之前，那时候我们一起走了红毯哈哈，感觉时间过的好快，两年多了，今年注意到你长了好多白头发，我还是希望爸爸一直年轻诶。第二张图片是初二那年给你们过生日的时候，很少看到你笑的像图片里那样啊，多笑笑~谢谢你总是在我身后默默守护。那些日子里你的身影，是我坚持的勇气来源。希望你注意身体，少抽烟多休息，多多表达爱~每天爱我多一点~</p>

    <div class="grid">
      <img src="dad1.jpg" alt="和爸爸在红毯" class="hero-img">
      <img src="dad2.jpg" alt="送手工小屋" class="hero-img">
    </div>

    <div class="panel">
      <a class="btn" href="quiz.html?for=dad">下一步 → 小小互动</a>
    </div>

    <!-- 只保留一个音频元素 -->
    <audio id="bgm" class="audio" controls loop></audio>
    <p class="tip">（若未自动播放，请点一下 ▶ ）</p>
  </div>

  <script>
    // 获取URL参数中的音乐文件
    const urlParams = new URLSearchParams(window.location.search);
    const musicSrc = urlParams.get('music') || 'story.mp3';
    
    const audio = document.getElementById('bgm');
    audio.src = musicSrc;
    
    // 关键修复：通过用户交互触发播放
    function playAudio() {
      audio.play().then(() => {
        // 播放成功后移除事件监听
        document.removeEventListener('click', playAudio);
        document.removeEventListener('touchstart', playAudio);
      }).catch(err => {
        console.log('播放需要用户交互:', err);
      });
    }
    
    // 监听任何用户交互来触发播放
    document.addEventListener('click', playAudio);
    document.addEventListener('touchstart', playAudio); // 移动端
    
    // 尝试自动播放（多数情况会失败，但可以保留）
    audio.play().catch(() => {});
  </script>
</body>
</html>
